---
layout: post
title: " JPA의 시작 "
categories: [ java, jpa ]
---

### JPA(Java Persistence API) 란? 
   JAVA 진영의 ORM 기술 표준이다. ORM (Object-relational mapping / 객체 관계 매핑)이란 외래키를 이용한 join으로 연관관계 검색하는 것이 아닌,
 객체간의 연관관계를 통해 저장/삭제/조회/수정이 되는 기술이다. 즉, 객체의 getter, setter를 통해 데이터를 저장 조회하는 것이다. 
 JPA는 Application과 JDBC 사이에서 동작한다. JPA는 Application의 객체를 RDB에 저장/조회할 수 있도록 SQL문을 자동 생성해 준다. 
 그리고 데이터 연결 최적화를 위한 다양한 기능도 제공한다.  


### 마이바티스를 이용한 프로그래밍의 한계

마이바티스(기존 매핑 라이브러리)를 이용해서 서버 프로그램을 만들다 보면, SQL을 직접 작성하여 객체를 매핑해 주는 코드를 작성하게 된다.
코드를 작성하다보면 테이블마다, CRUD를 해야하는 범위 마다, 매핑 코드를 작성해야 하기 마련이다.
이런 개발은 시스템의 규모가 작을 때는 그럭저럭 할 만하다.
또 시스템의 가변성이 적다면 기술 난이도가 적은 마이바티스를 이용해 호로록 개발 하는 것도 나쁘지 않다.

하지만 서비스가 매번 변경 확장된다면?
시스템의 규모가 커서 테이블이 매우 많아진다면?
이런 매핑을 위해 들어가는 코드 작성시간, 또 유지보수를 위해 손대야 하는 코드의 양이 기하급수적으로 늘어난다.

서비스 개선 및 제공 기능 추가로 인해서 데이터 조회 범위가 변경되면 그에 따른 매핑코드들도 모두 변경해야 하기 때문에 기존의 시스템의 변경이 매우 번잡스러워 진다. 
이런 불상사를 막기위해 초기의 설계가 무척 중요해지며, 매핑을 쉽게 하기 위해 객체지향적인 설계를 어느 정도 포기하는 것이 필요하다. 


### JPA를 사용하면 ?
JPA를 사용하면 매핑에 드는 수고로움을 덜어낼 수 있다. 매핑코드가 적은 만큼 서비스 개선 및 수정이 이루어 질 때 변경되어야 하는 코드들도 자연적으로 줄어든다.
따라서 유지보수 용이성이 증가하고, 코드가 간결해 진다.
이런 장점을 이용하기 위해 JPA를 이용하려면 먼저 객체매핑을 해 주어야 한다.  객체를 적절하게 매핑해 준다면 SQL 코드를 작성할 필요가 없다.
객체와 연관된 다른 객체를 참조하듯이 데이터베이스에 있는 연관된 레코드들을 쉽게 조회 할 수 있다.
JPA의 구현체가 SQL 코드를 자동 생성해 적절한 타이밍에 정보를 자동으로 조회해 주기 때문이다.

결국, JAVA의 객체지향적인 장점들을 이용해 유연하고 확장에 열려있는 시스템을 구현이 할 수 있다.

### JPA 사용의 높은 진입장벽 !
일단 JPA를 잘 사용하려면 알아야 할 기술적인 내용들이 많다. 
ORM을 이용해 프로그래밍하려면 RDB에 대해서도 잘 알아야 하는것은 물론이거니와, 객체지향적인 프로그래밍 같는 장점도 알아야 ORM을 제대로 활용 할 수 있다.
또한 JPA를 이용한 매핑 및 데이터 조회하는 방법도 따로 공부해야 한다.
기술적으로 알아야 할 내용이 많은 만큼 진입장벽 또한 높다고 볼 수 있다.
사용방법은 물론이거니와 내부 동작원리도 알아야 한다. 작동원리를 모르고 사용하다가 오류를 만나면 오류의 원인을 찾는데 시간이 많이 지연대기 때문이다.

### 그럼에도 불구하고...
그럼에도 내가 JPA를 공부하고자 하는 이유는, 현재 개발하려는 시스템 때문이다.
지속적으로 서비스가 변경되고, 유지보수 해야 하며, 확장해야 하며, 시스템이 가지는 기능적인 규모도 제법 크다.
개발하고 납품해야 하는 단일 프로젝트라면 JPA를 공부하는 시간과 매핑코드 작성의 시간을 저울질 해보았겠지만,
지속적으로 코드를 개선 개발 확장해야하는 현재 개발 목표 시스템의 특성을 고려하여 JPA진입에 시간을 투자하기로 결정했다.
시간이 지날 수록 JPA를 공부하는 것에 대한 진가가 발휘될 것이라 기대하며 Deep Study를 시작해 본다.





